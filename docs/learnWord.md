# 20 天学习日志（LearnWord）

## 第 1 天
清晨阅读《智慧物业管理平台》课程文档，使用思维导图工具拆解需求，划分认证、物业、租约、维修、支付和前端界面六大模块。上午搭建 Spring Boot 骨架，配置 Web、Data JPA、Security、Validation 依赖并整理 ER 草图。午后评估 JWT 搭配 HttpOnly Cookie 的安全边界，梳理角色权限矩阵。傍晚输出接口初稿和分页约定，记录潜在风险点，为后续迭代设定目标与时间表，团队协作计划由此成形。

## 第 2 天
根据 ER 草图实现用户、角色、物业、租约、支付、维修等实体，补充仓库接口与关联注解。上午调试枚举映射，确认 MySQL 方言与时区配置。午后为关键表设计联合索引并编写初始化脚本，验证 JPA 自动建表效果。傍晚编写简单的 Repository 单元测试，确保新增与删除操作工作正常。晚上整理数据库字段说明，对需要前端展示的列加注释，方便同伴理解数据含义。

## 第 3 天
聚焦认证模块，实现注册、登录、刷新、注销全流程，整合 BCrypt 密码加密与刷新令牌存储。上午配置 Spring Security 过滤链，插入自定义 JWT 过滤器并调试异常响应。午后完善 Cookie 工具类，统一 SameSite、Secure 参数。傍晚用 Postman 走通多场景测试，验证错误提示。夜间撰写安全注意事项，记录如何在生产替换密钥和调整过期时间。

## 第 4 天
开发物业管理服务，实现分页查询、创建、更新、删除，并在服务层严格区分管理员与业主权限。上午编写 DTO 映射器与分页响应结构，保证输出一致。午后完成 `PropertyController` 并使用 MockMvc 验证租客无法写入数据。傍晚整理状态枚举与字段约定，为前端提供展示建议。夜间复盘代码结构，补充 Javadoc，确保后续维护者快速上手。

## 第 5 天
实现租约业务逻辑，创建时校验物业所有权，默认状态为 ACTIVE 并同步更新物业状态。上午完善租户视图过滤，使其仅能查看自身租约。午后完成更新与删除操作，注意状态终止后将物业恢复为 AVAILABLE。傍晚补充租约生命周期说明，绘制状态转换图。夜间执行集成测试，记录接口响应示例与潜在边界情况。

## 第 6 天
处理维修工单模块，租客提交问题描述，系统记录时间与初始状态。上午编写分页查询，根据角色自动切换数据范围。午后实现状态更新接口，管理员和业主可将工单标记为处理中或完成。傍晚为状态变化写入完成时间，确保数据可追溯。夜间梳理异常提示，准备在用户手册中说明审批流程。

## 第 7 天
聚焦支付模块，管理员与业主可登记租金，租客仅能查询。上午实现服务层权限校验，对租客访问他人租约的请求立即拒绝。午后处理金额校验与日期格式，确保序列化统一。傍晚联调租约模块，确认删除租约后相关支付无法再新增。夜间总结财务数据的注意事项，提示后续需要增加导出功能。

## 第 8 天
完善公共层，统一异常响应为结构化 JSON，并对字段校验异常提供友好提示。上午补全所有 DTO 与 Mapper，避免重复序列化逻辑。午后整理工具类与常量，补写文档说明。傍晚调整日志级别，区分调试与生产输出。夜间对整体目录结构进行注释，让团队成员在查看源码时能够快速定位模块。

## 第 9 天
搭建后端自动化测试框架，结合 MockMvc 与 H2 内存数据库执行核心流程冒烟。上午为认证场景编写端到端测试，模拟不同角色访问。午后补充物业、租约、维修的授权测试。傍晚输出测试覆盖率报告，并记录缺口。夜间根据结果制定后续补测计划，确保在功能完善后继续维护测试资产。

## 第 10 天
添加系统启动初始化任务，保证基础角色在首启时即存在。上午梳理配置文件，将数据库、JWT、CORS 参数全部改为可观测的环境变量。午后验证多环境切换，并编写 README 后端章节。傍晚执行一轮端到端手工验收，从注册到维修处理再到租金登记。夜间整理验收结果与已发现的问题，安排下一步修正。

## 第 11 天
启动前端项目，使用 Vite 搭建 Vue3 脚手架并配置路径别名。上午编写基础样式文件，统一字体、按钮、卡片风格。午后接入 Pinia 与 Axios，设定 401 自动刷新策略。傍晚完成路由骨架与导航布局，包括不同角色看到的菜单。夜间撰写前端开发计划，明确每个页面的接口与状态需求。

## 第 12 天
实现登录与注册页面，连接 Pinia 仓库管理用户信息。上午处理表单校验与错误提示，确保体验顺畅。午后联调后端认证接口，验证 Cookie 携带与重定向逻辑。傍晚实现路由守卫，限制未登录或角色不足的访问。夜间测试刷新页面后的会话恢复，确认 `/api/auth/me` 调用能自动更新状态。

## 第 13 天
搭建仪表盘页面，展示物业、租约、维修数量等核心指标。上午设计渐变卡片与响应式布局。午后联调多个统计接口，允许部分接口失败时仍展示其他数据。傍晚完善加载状态与错误提示。夜间整理视觉设计建议，为后续 UI 优化留出空间和方向。

## 第 14 天
开发物业管理前端，包含创建/编辑表单与分页表格。上午联调后端接口，处理管理员指定业主的场景。午后实现角色提示，租客仅展示列表。傍晚为操作按钮添加二次确认与表单重置逻辑。夜间回放主要业务流程，记录需要改进的校验规则和交互细节。

## 第 15 天
实现维修工单界面，租客端提供简洁表单，业主/管理员端显示状态选择器。上午联调状态更新接口，确保失败时回滚 UI 状态。午后增加时间格式化与状态徽章，增强可读性。傍晚整理工单操作指南，准备写入用户帮助文档。夜间测试不同角色的交互路径，确认权限提示清晰。

## 第 16 天
完善租约管理视图，表单支持租期开始与结束日期，表格展示租客与物业信息。上午联调创建与更新接口，验证业主只能操作自有物业。午后处理日期控件交互，避免结束时间早于开始时间。傍晚优化列表排序与空态提示。夜间为租客视角单独测试，确保只读视图无误。

## 第 17 天
完成支付记录页面，支持按租约筛选，并在管理员/业主端提供登记表单。上午联调接口，确认租客访问他人租约时后端拒绝。午后添加金额格式化与最近一次记录高亮。傍晚实现登记成功后的自动刷新。夜间撰写财务模块使用说明，提醒先核验租约再登记金额。

## 第 18 天
统一前端视觉体验，调整导航栏、按钮 hover 效果与表格滚动条样式。上午处理响应式断点，在平板设备上保持两列布局。午后为列表加载过程添加骨架屏与空态插画。傍晚检查深色模式兼容性并记录改进建议。夜间回顾用户流程，确保每个页面都有明确的操作指引。

## 第 19 天
编写部署脚本，完成后端与前端的 Dockerfile，配置 nginx 静态托管与反向代理。上午组装 `docker-compose.yml`，定义 MySQL、后端、前端三服务。午后本地构建镜像并通过 Compose 启动，测试端口映射与环境变量覆盖。傍晚整理部署文档与常见问题排查项。夜间校对 README，确保新人可以按文档快速启动项目。

## 第 20 天
回顾整个项目，补充模块注释与文档，完善 `docs/module_overview.md`。上午整理自动化测试清单，标记已覆盖场景与待补充用例。午后执行最后一次端到端演练，截取截图用于验收报告。傍晚写下 LearnWord 日志，总结 20 天的节奏、收获与不足。夜间安排后续优化计划：限制注册可选角色、完善租客工单关联校验、调整 CORS 配置，持续迭代平台质量。
